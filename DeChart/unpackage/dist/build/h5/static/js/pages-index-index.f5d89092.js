(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"070a":function(t,e,i){"use strict";i.r(e);var n=i("b883"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"18cb":function(t,e,i){var n=i("c109");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("29fecebf",n,!0,{sourceMap:!1,shadowMode:!1})},2909:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=o(i("6005")),a=o(i("db90")),r=o(i("06c5")),s=o(i("3427"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(0,n.default)(t)||(0,a.default)(t)||(0,r.default)(t)||(0,s.default)()}},3427:function(t,e,i){"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},4550:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-text",[t._v(t._s(t.dateShow))])},r=[]},"54e2":function(t,e,i){"use strict";i.r(e);var n=i("7e43"),a=i("070a");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("f3dc");var s,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"63f80e58",null,!1,n["a"],s);e["default"]=u.exports},6005:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=a(i("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t))return(0,n.default)(t)}},7531:function(t,e,i){"use strict";i("a9e3"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("9cc8"),a={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,n.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var t=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){t.refresh()}),parseInt(this.refreshRate)))}}};e.default=a},"7e43":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={uniDateformat:i("b380").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"top-bar"},[i("v-uni-navigator",{staticClass:"top-bar-left",attrs:{url:"/pages/user-home/user-home?id="+t.id,"hover-class":"none"}},[i("v-uni-image",{staticClass:"myIcon",attrs:{src:t.iconPath}})],1),i("v-uni-view",{staticClass:"top-bar-right"},[i("v-uni-image",{staticClass:"search",attrs:{src:"/static/images/index/search.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}}}),i("v-uni-image",{staticClass:"add",attrs:{src:"/static/images/index/add.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBuildGroup.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"apply",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toFriendQuest.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"apply-left"},[0!==t.requests.tip?i("v-uni-text",{staticClass:"tips"},[t._v(t._s(t.requests.tip))]):t._e(),i("v-uni-image",{attrs:{src:"/static/images/index/add-friend.png"}})],1),i("v-uni-view",{staticClass:"apply-right"},[i("v-uni-view",{staticClass:"info-box"},[i("v-uni-text",{staticClass:"nickname"},[t._v("好友请求")]),i("v-uni-view",{staticClass:"date"},[i("uni-dateformat",{attrs:{date:t.requests.time,threshold:[6e4,36e5],format:"yyyy/MM/dd hh:mm:ss"}})],1)],1),i("v-uni-view",{staticClass:"content"},[t._v(t._s(t.requests.msg))])],1)],1),t._l(t.friendList,(function(e,n){return i("v-uni-view",{key:e.id,staticClass:"list-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toChart(e)}}},[i("v-uni-view",{staticClass:"list-item-left"},[e.tip>0?i("v-uni-text",{staticClass:"tips"},[t._v(t._s(e.tip))]):t._e(),i("v-uni-image",{attrs:{src:""+e.iconPath}})],1),i("v-uni-view",{staticClass:"list-item-right"},[i("v-uni-view",{staticClass:"info-box"},[i("v-uni-view",{staticClass:"nickname"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"date"},[i("uni-dateformat",{attrs:{date:e.lastTime,threshold:[6e4,36e5],format:"yyyy/MM/dd hh:mm:ss"}})],1)],1),i("v-uni-view",{staticClass:"content"},[t._v(t._s(e.msg))])],1)],1)}))],2)],1)},r=[]},"9cc8":function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t+="";while(t.length<e)t="0"+t;return t.slice(-e)}i("c975"),i("fb6a"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=s,e.friendlyDate=o;var a={yyyy:function(t){return n(t.year,4)},yy:function(t){return n(t.year)},MM:function(t){return n(t.month)},M:function(t){return t.month},dd:function(t){return n(t.day)},d:function(t){return t.day},hh:function(t){return n(t.hour)},h:function(t){return t.hour},mm:function(t){return n(t.minute)},m:function(t){return t.minute},ss:function(t){return n(t.second)},s:function(t){return t.second},SSS:function(t){return n(t.millisecond,3)},S:function(t){return t.millisecond}};function r(t){if(t instanceof Date)return t;switch(typeof t){case"string":return t.indexOf("T")>-1?new Date(t):new Date(t.replace(/-/g,"/"));default:return new Date(t)}}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!t&&0!==t)return"";t=r(t);var i={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},n=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,s=!0,o=e;while(s)s=!1,o=o.replace(n,(function(t){return s=!0,a[t](i)}));return o}function o(t,e){var i=e.locale,n=void 0===i?"zh":i,a=e.threshold,o=void 0===a?[6e4,36e5]:a,u=e.format,c=void 0===u?"yyyy/MM/dd hh:mm:ss":u;if("-"===t)return t;if(!t&&0!==t)return"";var d,f,l={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},h=l[n]||l.zh,p=r(t),v=p.getTime()-Date.now(),g=Math.abs(v);if(g<o[0])return v<0?h.justNow:h.soon;if(g>=o[1])return s(p,c);var m=h.later;v<0&&(m=h.ago,v=-v);var y=Math.floor(v/1e3),b=Math.floor(y/60),w=Math.floor(b/60),x=Math.floor(w/24),S=Math.floor(x/30),M=Math.floor(S/12);switch(!0){case M>0:d=M,f=h.year;break;case S>0:d=S,f=h.month;break;case x>0:d=x,f=h.day;break;case w>0:d=w,f=h.hour;break;case b>0:d=b,f=h.minute;break;default:d=y,f=h.second;break}return"en"===n&&(1===d?d="a":f+="s"),h.template.replace(/{\s*num\s*}/g,d+"").replace(/{\s*unit\s*}/g,f).replace(/{\s*suffix\s*}/g,m)}},b380:function(t,e,i){"use strict";i.r(e);var n=i("4550"),a=i("cfa9");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var s,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"7d20afea",null,!1,n["a"],s);e["default"]=u.exports},b883:function(t,e,i){"use strict";var n=i("4ea4");i("99af"),i("4160"),i("c975"),i("45fc"),i("4e82"),i("a434"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909")),r={data:function(){return{id:"",iconPath:"",token:"",friendList:[],requests:{}}},computed:{isEmperty:function(){return 0===this.friendList.length}},onLoad:function(){this.getStorage(),this.getFriendQuest(),this.join(this.id),this.receiveSocket(),this.receiveGroupSocket(),this.receiveRequestSocket()},onShow:function(){this.getStorage(),this.getFriends(),this.getFriendQuest()},methods:{getStorage:function(){try{if(uni.getStorageSync("user")){var t=uni.getStorageSync("user");this.id=t.id,this.iconPath="".concat(this.serverUrl,"/user/").concat(t.iconPath),this.token=t.token}else uni.navigateTo({url:"/pages/login/login"})}catch(e){console.log(e)}},join:function(t){this.socket.emit("login",t)},receiveSocket:function(){var t=this;this.socket.on("msg",(function(e){t.friendList.some((function(i){i.id===e.fromId&&t.listSort(i,e)}))}))},receiveGroupSocket:function(){var t=this;this.socket.on("groupMsg",(function(e,i){t.friendList.some((function(n){n.gid===i&&(t.updateGroupTip(n,1),t.listSort(n,e))}))}))},receiveRequestSocket:function(){var t=this;this.socket.on("request",(function(e){t.getFriendQuest()}))},listSort:function(t,e){var i={id:t.id,gid:t.gid,iconPath:t.iconPath,lastTime:e.time,msg:e.message,name:t.name,tip:t.tip+1,type:e.types};1===i.type?i.msg="[图片]":2===i.type&&(i.msg="[位置]"),this.friendList.splice(this.friendList.indexOf(t),1),this.friendList.unshift(i)},toSearch:function(){uni.navigateTo({url:"/pages/search/search"})},toBuildGroup:function(){uni.navigateTo({url:"/pages/build-group/build-group"})},toFriendQuest:function(){uni.navigateTo({url:"/pages/friend-request/friend-request"})},toChart:function(t){t.gid?(0!==t.tip&&this.updateGroupTip(t,0),uni.navigateTo({url:"/pages/chart-room/chart-room?gid=".concat(t.gid,"&&name=").concat(t.name)})):(0!==t.tip&&this.updateTip(t.id),uni.navigateTo({url:"/pages/chart-room/chart-room?fid=".concat(t.id,"&&name=").concat(t.name)}))},getFriendQuest:function(){var t=this;uni.request({url:"".concat(this.serverUrl,"/index/getfriend"),data:{uid:uni.getStorageSync("user").id,state:1},method:"POST",success:function(e){return 200!==e.data.status?e.data.err:0===e.data.result.length?t.requests.tip=0:void(t.requests={msg:e.data.result[0].msg,tip:e.data.result.length,time:e.data.result[0].lastTime})}})},getFriends:function(){var t=this;uni.request({url:"".concat(this.serverUrl,"/index/getfriend"),data:{uid:this.id,state:0},method:"POST",success:function(e){try{var i=e.data.result;t.friendList=[],i.forEach((function(e){e.iconPath="".concat(t.serverUrl,"/user/").concat(e.iconPath),e.lastTime=Date.parse(e.lastTime)})),t.friendList=i,t.getGroups()}catch(n){console.log(n)}}})},getGroups:function(){var t=this;uni.request({url:"".concat(this.serverUrl,"/index/getgroup"),data:{uid:this.id},method:"POST",success:function(e){if(200===e.data.status&&0!==e.data.result.length){var i=e.data.result;i.forEach((function(e){e.iconPath="".concat(t.serverUrl,"/group/icon/").concat(e.iconPath),e.lastTime=Date.parse(e.lastTime),t.socket.emit("group",e.gid)})),t.friendList=[].concat((0,a.default)(t.friendList),(0,a.default)(i)),t.friendList.sort(t.compare("lastTime"))}}})},compare:function(t){return function(e,i){return i[t]-e[t]}},updateTip:function(t){uni.request({url:"".concat(this.serverUrl,"/index/updateunreadmsg"),data:{uid:this.id,fid:t,state:1},method:"POST",success:function(t){}})},updateGroupTip:function(t,e){var i=this;uni.request({url:"".concat(this.serverUrl,"/index/updategrouptip"),data:{uid:this.id,gid:t.gid,tip:1===e?t.tip+1:0},method:"POST",success:function(t){200===t.data.status&&i.getFriends()}})}}};e.default=r},c109:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-63f80e58]{padding-top:%?88?%}.top-bar[data-v-63f80e58]{z-index:100;display:flex;justify-content:space-between;align-items:center;border-bottom:solid 1px hsla(0,0%,80%,.8);position:fixed;top:0;width:100%;height:%?88?%}.top-bar-left[data-v-63f80e58]{\r\n  /* margin-left: 20rpx;\r\n */width:15%;display:flex;justify-content:center}.top-bar-center[data-v-63f80e58]{width:70%;font-size:%?40?%;display:flex;justify-content:center}.top-bar-right[data-v-63f80e58]{\r\n   /* margin-right: 20rpx;\r\n */width:15%;display:flex;justify-content:center}.top-bar[data-v-63f80e58]{background-color:#fff}.top-bar-right[data-v-63f80e58]{width:24%}.top-bar .myIcon[data-v-63f80e58]{width:%?68?%;height:%?68?%;border-radius:10px;display:block}.top-bar .search[data-v-63f80e58]{width:%?60?%;height:%?60?%;padding:0 %?10?%}.top-bar .add[data-v-63f80e58]{width:%?60?%;height:%?60?%;padding:0 %?10?%}.list[data-v-63f80e58]{margin-top:10px}.list .apply[data-v-63f80e58]{display:flex;align-items:center;padding:%?20?%}.list .apply-left[data-v-63f80e58]{border-radius:%?20?%;background-color:#ffe431;margin-right:10px;position:relative}.list .apply-left .tips[data-v-63f80e58]{position:absolute;top:%?-6?%;left:%?68?%;z-index:10;min-width:%?20?%;height:%?36?%;padding:0 %?8?%;background-color:#ff5d5b;border-radius:50%;font-size:%?24?%;color:#fff;line-height:%?36?%;text-align:center}.list .apply-left uni-image[data-v-63f80e58]{width:%?96?%;height:%?96?%}.list .apply-right[data-v-63f80e58]{display:flex;flex-direction:column;justify-content:space-between;width:80%}.list .apply-right .info-box[data-v-63f80e58]{display:flex;justify-content:space-between}.list .apply-right .info-box .nickname[data-v-63f80e58]{font-size:%?36?%;color:#272832;margin-bottom:5px}.list .apply-right .info-box .date[data-v-63f80e58]{font-size:%?24?%;color:rgba(39,40,50,.4)}.list .apply-right .content[data-v-63f80e58]{font-size:%?28?%;color:rgba(39,40,50,.6);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.list-item[data-v-63f80e58]{display:flex;align-items:center;padding:%?20?%}.list-item-left[data-v-63f80e58]{margin-right:10px;position:relative}.list-item-left .tips[data-v-63f80e58]{position:absolute;top:%?-6?%;left:%?68?%;z-index:10;min-width:%?36?%;height:%?36?%;background-color:#ff5d5b;border-radius:50%;font-size:%?24?%;color:#fff;line-height:%?36?%;text-align:center}.list-item-left uni-image[data-v-63f80e58]{width:%?96?%;height:%?96?%;border-radius:%?20?%;background-color:#fff}.list-item-right[data-v-63f80e58]{display:flex;flex-direction:column;justify-content:space-between;width:80%}.list-item-right .info-box[data-v-63f80e58]{display:flex;justify-content:space-between}.list-item-right .info-box .nickname[data-v-63f80e58]{font-size:%?32?%;color:#272832;margin-bottom:5px}.list-item-right .info-box .date[data-v-63f80e58]{font-size:%?24?%;color:rgba(39,40,50,.4)}.list-item-right .content[data-v-63f80e58]{font-size:%?28?%;color:rgba(39,40,50,.6);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}',""]),t.exports=e},cfa9:function(t,e,i){"use strict";i.r(e);var n=i("7531"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},db90:function(t,e,i){"use strict";function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},f3dc:function(t,e,i){"use strict";var n=i("18cb"),a=i.n(n);a.a}}]);